<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>YYUUS TV</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        :root {
            --bg-deep: #12121D;      /* El oscuro de tu imagen */
            --yyuus-pink: #FF3B8E;   /* El rosado magenta de YYUUS */
            --card-bg: #1E1E2E;
            --text-white: #FFFFFF;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-deep);
            color: var(--text-white);
            margin: 0; padding: 0;
            display: flex; flex-direction: column; height: 100vh;
            overflow: hidden;
        }

        /* --- Header & Tabs --- */
        header {
            padding: 15px; text-align: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .logo { font-size: 24px; font-weight: 900; color: var(--yyuus-pink); letter-spacing: 2px; }
        .logo span { color: white; font-size: 12px; display: block; margin-top: -5px; }

        nav {
            display: flex; justify-content: center; gap: 20px; padding: 10px 0;
            background: rgba(255,255,255,0.03);
        }
        .tab { font-weight: 600; font-size: 14px; opacity: 0.6; cursor: pointer; border-bottom: 2px solid transparent; padding-bottom: 5px; }
        .tab.active { opacity: 1; border-color: var(--yyuus-pink); color: var(--yyuus-pink); }

        /* --- Reproductor Principal --- */
        .main-player {
            width: 100%; background: #000; aspect-ratio: 16 / 9;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        video { width: 100%; height: 100%; }

        /* --- Selector de Canales con Flechas --- */
        .selector-container {
            flex-grow: 1; display: flex; align-items: center;
            justify-content: center; padding: 20px; position: relative;
        }

        .arrow {
            background: none; border: none; color: var(--yyuus-pink);
            font-size: 40px; cursor: pointer; z-index: 10;
            transition: transform 0.2s; padding: 10px;
        }
        .arrow:active { transform: scale(0.8); }

        .carousel {
            display: flex; overflow: hidden; width: 220px;
            justify-content: center; align-items: center;
        }

        .channel-card {
            min-width: 180px; background: var(--card-bg);
            border: 2px solid var(--yyuus-pink); border-radius: 20px;
            padding: 25px; text-align: center;
            box-shadow: 0 0 20px rgba(255, 59, 142, 0.2);
            animation: fadeIn 0.3s ease;
        }

        .channel-card img { height: 70px; margin-bottom: 15px; filter: drop-shadow(0 0 5px rgba(0,0,0,0.5)); }
        .channel-card h3 { margin: 0; font-size: 18px; text-transform: uppercase; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <header>
        <div class="logo">YYUUS <span>TV</span></div>
    </header>

    <nav>
        <div class="tab active">Televisión</div>
        <div class="tab">Noticias</div>
        <div class="tab">Configuración</div>
    </nav>

    <div class="main-player">
        <video id="video" controls autoplay playsinline></video>
    </div>

    <div class="selector-container">
        <button class="arrow" onclick="prevChannel()">❮</button>
        
        <div class="carousel" id="carousel">
            </div>

        <button class="arrow" onclick="nextChannel()">❯</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.setHeaderColor('#12121D');

        const channels = [
            { name: "Mega", logo: "https://upload.wikimedia.org/wikipedia/commons/e/e0/Logo_Mega_2020.png", url: "https://unlimited1-cl-isp.dps.live/mega/mega.smil/playlist.m3u8" },
            { name: "TVN", logo: "https://upload.wikimedia.org/wikipedia/commons/2/22/TVN_Logo_2020.svg", url: "https://mdstrm.com/live-stream-playlist/530c804b19777d4c06000032.m3u8" },
            { name: "Canal 13", logo: "https://upload.wikimedia.org/wikipedia/commons/d/d4/Logo_Canal_13_Chile.svg", url: "https://d156un69z3b3la.cloudfront.net/out/v1/7183e84360e64303b3069c9b6890f5c1/index.m3u8" },
            { name: "CHV", logo: "https://upload.wikimedia.org/wikipedia/commons/a/af/Chilevisi%C3%B3n_2018_logo.svg", url: "https://vdo.turner.com/live/chilevision/playlist.m3u8" }
        ];

        let currentIndex = 0;
        const video = document.getElementById('video');
        const carousel = document.getElementById('carousel');

        function updateUI() {
            const ch = channels[currentIndex];
            // Actualizar tarjeta
            carousel.innerHTML = `
                <div class="channel-card">
                    <img src="${ch.logo}" alt="${ch.name}">
                    <h3>${ch.name}</h3>
                </div>
            `;
            // Cargar Video
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(ch.url);
                hls.attachMedia(video);
                hls.on(Hls.Events.MANIFEST_PARSED, () => video.play());
            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                video.src = ch.url;
                video.play();
            }
            tg.HapticFeedback.impactOccurred('medium');
        }

        function nextChannel() {
            currentIndex = (currentIndex + 1) % channels.length;
            updateUI();
        }

        function prevChannel() {
            currentIndex = (currentIndex - 1 + channels.length) % channels.length;
            updateUI();
        }

        // Iniciar con Mega
        updateUI();
    </script>
</body>
</html>
